{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://tameter.org/iet.schema.json",
  "title": "Impact Estimation Tool (IET) File",
  "description": "Schema for Impact Estimation Tool saved files. See docs/examples/sample-iet.json for an example.",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "$schema": {
      "type": "string",
      "description": "Path or URL of this schema file. Example: 'docs/schema/iet.schema.json'"
    },
    "schemaVersion": {
      "type": "integer",
      "const": 1,
      "description": "Schema version for on-disk files. Initial version is 1."
    },
    "performanceRequirements": {
      "type": "array",
      "description": "List of Performance Requirements (rows). Order is significant and preserved in files/UI.",
      "items": { "$ref": "#/$defs/PerformanceRequirement" }
    },
    "resourceRequirements": {
      "type": "array",
      "description": "List of Resource Requirements (rows). Order is significant and preserved in files/UI.",
      "items": { "$ref": "#/$defs/ResourceRequirement" }
    },
    "designIdeas": {
      "type": "array",
      "description": "List of Design Ideas (columns). Order is significant and preserved in files/UI.",
      "items": { "$ref": "#/$defs/DesignIdea" }
    },
    "cells": {
      "type": "array",
      "description": "Input cells mapping requirementId Ã— designId to an estimated value on the requirement's scale.",
      "items": { "$ref": "#/$defs/Cell" }
    }
  },
  "required": ["schemaVersion", "performanceRequirements", "resourceRequirements", "designIdeas", "cells"],
  "$defs": {
    "NonEmptyString": {
      "type": "string",
      "minLength": 1
    },
    "PerformanceRequirement": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": { "$ref": "#/$defs/NonEmptyString", "description": "Stable identifier for the requirement (e.g., 'Perf-ResponseTime')." },
        "current": { "type": "number", "description": "Current measured value on the unit's scale." },
        "goal": { "type": "number", "description": "Target (goal) value on the unit's scale." },
        "unit": { "$ref": "#/$defs/NonEmptyString", "description": "Scale unit label (e.g., 'ms', 'hours')." }
      },
      "required": ["id", "current", "goal", "unit"]
    },
    "ResourceRequirement": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": { "$ref": "#/$defs/NonEmptyString", "description": "Stable identifier for the requirement (e.g., 'Cost-DevHours')." },
        "budget": { "type": "number", "description": "Budget (target maximum) value on the unit's scale." },
        "unit": { "$ref": "#/$defs/NonEmptyString", "description": "Scale unit label (e.g., 'USD', 'hours')." }
      },
      "required": ["id", "budget", "unit"]
    },
    "DesignIdea": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "id": { "$ref": "#/$defs/NonEmptyString", "description": "Stable identifier for the design idea (e.g., 'IdeaA')." }
      },
      "required": ["id"]
    },
    "Cell": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "requirementId": { "$ref": "#/$defs/NonEmptyString", "description": "References PerformanceRequirement.id or ResourceRequirement.id" },
        "designId": { "$ref": "#/$defs/NonEmptyString", "description": "References DesignIdea.id" },
        "estimatedValue": { "type": "number", "description": "Estimated new value on the requirement's unit scale." },
        "confidence": { "type": "number", "minimum": 0, "description": "+/- confidence range on the same scale (optional)." }
      },
      "required": ["requirementId", "designId", "estimatedValue"]
    }
  }
}
